<!-- Comments Section-->
<div id="comments-container">
  <h2 id="coments-title">Comments and Suggestions</h2>

  <div id="comment-feed">
    {% for comment in comments %}
      <div class="single-comment">
        <strong>{{ comment.user.username }}:</strong> {{ comment.text }}
        {% if user == comment.user %}
          <div class="comment-actions">
            <a href="{% url 'edit_comment' comment.id %}" class="action-btn">Edit</a>
            <form method="POST" action="{% url 'delete_comment' comment.id %}" style="display: inline;">
              {% csrf_token %}
              <button type="submit" class="action-btn">Delete</button>
            </form>
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>

  {% if user.is_authenticated %}
    <form method="POST" id="comment-form" action="{% url 'add_comment' %}">
      {% csrf_token %}
      {{ form.text }}
      <div class="button-group">
        <button id="comment-btn" type="submit">Send</button>
      </div>
    </form>
  {% else %}
    <p style="text-align: center;">Please <a href="{% url 'login' %}">log in</a> to comment.</p>
  {% endif %}
</div>

{% block extra_js %}
<script>
  setTimeout(() => {
    const messageBox = document.getElementById('comment-message');
    if (messageBox) {
      messageBox.style.transition = 'transform 1s ease-out, opacity 1s ease-out';
      messageBox.style.transform = 'translateX(-100%)';
      messageBox.style.opacity = '0';
      setTimeout(() => {
        messageBox.remove();  // Remove it from the DOM
      }, 1000);
    }
  }, 10000);  // 10 seconds
</script>
{% endblock %}